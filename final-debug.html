<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Debug - Quiz App</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .debug-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 20px;
            z-index: 10000;
            font-family: monospace;
            font-size: 12px;
            overflow-y: auto;
            display: none;
        }
        
        .debug-overlay.active {
            display: block;
        }
        
        .debug-toggle {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #007AFF;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            z-index: 10001;
            cursor: pointer;
        }
        
        .element-inspector {
            border: 1px solid #333;
            margin: 10px 0;
            padding: 10px;
            background: #111;
        }
    </style>
</head>
<body>
    <button class="debug-toggle" onclick="toggleDebug()">üîç Debug</button>
    
    <div class="debug-overlay" id="debug-overlay">
        <h2>üîß Debug Information</h2>
        <button onclick="toggleDebug()" style="float: right; background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 4px;">Close</button>
        
        <div id="debug-content">
            <p>Debug information will appear here...</p>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="runFullDiagnostic()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin: 5px;">Run Full Diagnostic</button>
            <button onclick="testWelcomeScreenVisibility()" style="background: #17a2b8; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin: 5px;">Test Welcome Screen</button>
            <button onclick="testModuleLoading()" style="background: #ffc107; color: black; border: none; padding: 10px 20px; border-radius: 4px; margin: 5px;">Test Module Loading</button>
        </div>
    </div>

    <!-- This is exactly the same as the main application -->
    <div class="app-container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-content">
                <div class="logo-section">
                    <div class="app-icon">
                        <span class="material-icons">quiz</span>
                    </div>
                    <h1>Data Centre Certification</h1>
                    <p>Professional assessment platform for data centre expertise</p>
                </div>
                  <div class="name-input-section">
                    <div class="input-group">
                        <label for="user-name">Enter your full name for certificate</label>
                        <input type="text" id="user-name" placeholder="John Smith" autocomplete="name">
                        <span class="input-error" id="name-error">Please enter your full name</span>
                    </div>
                      <div class="preference-section">
                        <label class="preference-label">Quiz Preferences</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="show-answers" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-text">Show correct answers during quiz (allows reviewing answers immediately)</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="show-feedback" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-text">Show detailed review at end (displays all questions with correct/incorrect answers)</span>
                            </label>
                        </div>
                    </div>
                    
                    <button id="start-btn" class="primary-btn">
                        <span>Start Assessment</span>
                        <span class="material-icons">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Module Selection Screen -->
        <div id="module-screen" class="screen">
            <div class="screen-header">
                <button id="back-to-welcome" class="icon-btn">
                    <span class="material-icons">arrow_back</span>
                </button>
                <h2>Select Module</h2>
                <div class="user-info">
                    <span class="material-icons">person</span>
                    <span id="display-name">John Smith</span>
                </div>
            </div>
            
            <div class="modules-grid" id="modules-container">
                <!-- Modules will be generated dynamically -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function toggleDebug() {
            const overlay = document.getElementById('debug-overlay');
            overlay.classList.toggle('active');
        }
        
        function addDebugInfo(title, content) {
            const debugContent = document.getElementById('debug-content');
            const div = document.createElement('div');
            div.className = 'element-inspector';
            div.innerHTML = `<strong>${title}</strong><br>${content}`;
            debugContent.appendChild(div);
        }
        
        function clearDebugInfo() {
            document.getElementById('debug-content').innerHTML = '';
        }
        
        function inspectElement(element, name) {
            if (!element) {
                return `${name}: NOT FOUND`;
            }
            
            const styles = window.getComputedStyle(element);
            return `
                ${name}:<br>
                - ID: ${element.id}<br>
                - Classes: ${element.className}<br>
                - Display: ${styles.display}<br>
                - Visibility: ${styles.visibility}<br>
                - Opacity: ${styles.opacity}<br>
                - Position: ${styles.position}<br>
                - Width: ${styles.width}<br>
                - Height: ${styles.height}<br>
                - Z-Index: ${styles.zIndex}<br>
                - Background: ${styles.backgroundColor}<br>
                - Children: ${element.children.length}
            `;
        }
        
        function runFullDiagnostic() {
            clearDebugInfo();
            
            addDebugInfo('Page Load Status', `
                Document Ready State: ${document.readyState}<br>
                Window Loaded: ${document.readyState === 'complete'}<br>
                Script.js Loaded: ${typeof QuizApp !== 'undefined'}<br>
                Quiz App Instance: ${typeof window.quizApp !== 'undefined'}
            `);
            
            addDebugInfo('Screen Elements', `
                Welcome Screen: ${document.getElementById('welcome-screen') ? 'Found' : 'Missing'}<br>
                Module Screen: ${document.getElementById('module-screen') ? 'Found' : 'Missing'}<br>
                Total Screens: ${document.querySelectorAll('.screen').length}
            `);
            
            // Check app container
            const appContainer = document.querySelector('.app-container');
            addDebugInfo('App Container', inspectElement(appContainer, 'App Container'));
            
            // Check welcome screen
            const welcomeScreen = document.getElementById('welcome-screen');
            addDebugInfo('Welcome Screen', inspectElement(welcomeScreen, 'Welcome Screen'));
            
            // Check welcome content
            const welcomeContent = document.querySelector('.welcome-content');
            addDebugInfo('Welcome Content', inspectElement(welcomeContent, 'Welcome Content'));
            
            // Check if CSS is loaded
            const testDiv = document.createElement('div');
            testDiv.className = 'screen active';
            testDiv.style.position = 'absolute';
            testDiv.style.visibility = 'hidden';
            document.body.appendChild(testDiv);
            
            const testStyles = window.getComputedStyle(testDiv);
            addDebugInfo('CSS Loading Test', `
                Test Element Display: ${testStyles.display}<br>
                CSS Rules Applied: ${testStyles.display === 'block' ? 'YES' : 'NO'}<br>
                Font Family: ${testStyles.fontFamily}
            `);
            
            document.body.removeChild(testDiv);
            
            // Check console logs
            addDebugInfo('Console Logs', 'Check browser console for detailed logs');
        }
        
        function testWelcomeScreenVisibility() {
            const welcomeScreen = document.getElementById('welcome-screen');
            const rect = welcomeScreen.getBoundingClientRect();
            
            addDebugInfo('Welcome Screen Visibility Test', `
                Element Present: ${welcomeScreen ? 'YES' : 'NO'}<br>
                Bounding Rect: ${rect.width}x${rect.height} at (${rect.left}, ${rect.top})<br>
                In Viewport: ${rect.width > 0 && rect.height > 0}<br>
                Visible Area: ${rect.width * rect.height} pixels<br>
                Classes: ${welcomeScreen.className}<br>
                Active Class: ${welcomeScreen.classList.contains('active') ? 'YES' : 'NO'}
            `);
        }
        
        async function testModuleLoading() {
            try {
                const response = await fetch('quiz-modules.json');
                const data = await response.json();
                
                addDebugInfo('Module Loading Test', `
                    JSON Response: ${response.ok ? 'OK' : 'ERROR'}<br>
                    Status: ${response.status}<br>
                    Data Type: ${typeof data}<br>
                    Is Array: ${Array.isArray(data)}<br>
                    Module Count: ${Array.isArray(data) ? data.length : 'N/A'}<br>
                    First Module: ${Array.isArray(data) && data[0] ? data[0].name : 'N/A'}
                `);
            } catch (error) {
                addDebugInfo('Module Loading Test', `ERROR: ${error.message}`);
            }
        }
        
        // Auto-run diagnostic on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                runFullDiagnostic();
            }, 2000);
        });
        
        // Monitor for changes
        setInterval(() => {
            const welcomeScreen = document.getElementById('welcome-screen');
            if (welcomeScreen) {
                const rect = welcomeScreen.getBoundingClientRect();
                console.log(`Welcome screen check: ${rect.width}x${rect.height}, active: ${welcomeScreen.classList.contains('active')}`);
            }
        }, 5000);
    </script>
</body>
</html>
