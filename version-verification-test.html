<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Version Verification Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            font-weight: 500;
        }
        .pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 0;
            font-size: 16px;
        }
        button:hover { background: #0056b3; }
        #results { margin-top: 20px; }
        .test-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Version 2.1.2 Verification Test</h1>
        <p>This test verifies that all version displays correctly show Version 2.1.2</p>
        
        <button onclick="runVersionTest()">üöÄ Run Version Verification</button>
        
        <div id="results"></div>
    </div>

    <script>
        function addResult(test, status, message) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `status ${status}`;
            div.innerHTML = `<strong>${test}:</strong> ${message}`;
            results.appendChild(div);
        }

        function runVersionTest() {
            document.getElementById('results').innerHTML = '';
            addResult('Test Start', 'info', 'Checking all version displays...');
            
            // Test 1: Check HTML content
            fetch('index.html')
                .then(response => response.text())
                .then(html => {
                    const welcomeVersionMatch = html.match(/<span class="version">Version ([\d.]+)<\/span>/);
                    const menuVersionMatch = html.match(/<div class="version-text">Version ([\d.]+)<\/div>/);
                    
                    if (welcomeVersionMatch && welcomeVersionMatch[1] === '2.1.2') {
                        addResult('Welcome Screen Version', 'pass', '‚úÖ Correctly shows Version 2.1.2');
                    } else {
                        addResult('Welcome Screen Version', 'fail', `‚ùå Shows Version ${welcomeVersionMatch ? welcomeVersionMatch[1] : 'unknown'}`);
                    }
                    
                    if (menuVersionMatch && menuVersionMatch[1] === '2.1.2') {
                        addResult('Menu Version', 'pass', '‚úÖ Correctly shows Version 2.1.2');
                    } else {
                        addResult('Menu Version', 'fail', `‚ùå Shows Version ${menuVersionMatch ? menuVersionMatch[1] : 'unknown'}`);
                    }
                })
                .catch(err => {
                    addResult('HTML Test', 'fail', `‚ùå Error: ${err.message}`);
                });
            
            // Test 2: Check JavaScript config
            fetch('script.js')
                .then(response => response.text())
                .then(js => {
                    const versionMatch = js.match(/version:\s*'([\d.]+)'/);
                    
                    if (versionMatch && versionMatch[1] === '2.1.2') {
                        addResult('JavaScript Config', 'pass', '‚úÖ APP_VERSION correctly set to 2.1.2');
                    } else {
                        addResult('JavaScript Config', 'fail', `‚ùå APP_VERSION shows ${versionMatch ? versionMatch[1] : 'unknown'}`);
                    }
                })
                .catch(err => {
                    addResult('JavaScript Test', 'fail', `‚ùå Error: ${err.message}`);
                });
            
            // Test 3: Check live application
            setTimeout(() => {
                const testFrame = document.createElement('iframe');
                testFrame.style.display = 'none';
                testFrame.src = 'index.html';
                document.body.appendChild(testFrame);
                
                testFrame.onload = function() {
                    try {
                        const frameDoc = testFrame.contentDocument || testFrame.contentWindow.document;
                        const versionElement = frameDoc.querySelector('.version');
                        
                        if (versionElement && versionElement.textContent.includes('2.1.2')) {
                            addResult('Live Application', 'pass', '‚úÖ Live app correctly displays Version 2.1.2');
                        } else {
                            addResult('Live Application', 'fail', `‚ùå Live app shows: ${versionElement ? versionElement.textContent : 'version not found'}`);
                        }
                        
                        // Check if APP_VERSION is accessible
                        if (testFrame.contentWindow.APP_VERSION && testFrame.contentWindow.APP_VERSION.version === '2.1.2') {
                            addResult('Runtime Version', 'pass', '‚úÖ JavaScript APP_VERSION runtime correctly set to 2.1.2');
                        } else {
                            const runtimeVersion = testFrame.contentWindow.APP_VERSION ? testFrame.contentWindow.APP_VERSION.version : 'undefined';
                            addResult('Runtime Version', 'fail', `‚ùå Runtime APP_VERSION: ${runtimeVersion}`);
                        }
                        
                    } catch (err) {
                        addResult('Live Application', 'fail', `‚ùå Error testing live app: ${err.message}`);
                    }
                    
                    document.body.removeChild(testFrame);
                    
                    // Final summary
                    setTimeout(() => {
                        addResult('Test Complete', 'info', 'üéØ Version verification test completed. Check results above.');
                    }, 500);
                };
            }, 1000);
        }

        // Auto-run test on page load
        window.onload = function() {
            addResult('Ready', 'info', 'üìã Click "Run Version Verification" to test all version displays');
        };
    </script>
</body>
</html>
